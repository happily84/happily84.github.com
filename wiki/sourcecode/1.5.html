<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link type="image/x-icon" rel="icon" href="favicon.ico" />
<link type="image/x-icon" rel="shortcut icon" href="favicon.ico" />
<!--[if IE]><script type="text/javascript" src="../js/html5.js"></script><![endif]-->
<link rel="stylesheet" type="text/css" href="../../css/style.css" />
<title>Chapter1 Question5  - Zhaosheng's Personal Wiki</title>
</head>
<body>
<div id="all">
<div id="header">
    <ul id="top-nav">
        <li class="first"><a href="../../index.html" title="Home">Home</a></li>
        <li><a href="../../blog/index.html" title="Blog">Blog</a></li>
        <li class="actived"><a href="../index.html" title="Wiki">Wiki</a></li>
        <li><a href="https://twitter.com/happily84" title="Twitter">Twitter</a></li>
        <li><a href="http://github.com/happily84" title="Project">Project</a></li>
        <li class="last"><a href="../../resume/resume.html" title="About Me">AboutMe</a></li>
    </ul>
</div>
<div id="main">


<p>
<h1 class="justcenter"> Chapter1 Question5 </h1>
</p>

<h1 id="toc_1">Question</h1>

<p>
Implement a method to perform basic string compression using the counts of repeated characters. For example, the string aabcccccaaa would become a2b1c5a3. If the "compressed" string would not become smaller than the original string, your method should return the original string.
</p>

<h1 id="toc_2">Analysis</h1>

<h1 id="toc_3">SourceCode</h1>

<pre class="brush: java">
package chapter1;

public class question5 {
    public static String stringCompression( String original) {
        int compressedCount = 0;
        for ( int i = 0; i &lt; original.length();++i) {
            char current = original.charAt(i);
            if ( i+1 &lt; original.length() &amp;&amp; original.charAt(i+1) == current) {
                while ( ++i &lt; original.length() &amp;&amp; original.charAt(i) == current)
                    ++ compressedCount;
            }
            -- compressedCount;
        }
        
        if ( compressedCount &lt;= 0 )
            return original;
        
        StringBuilder result = new StringBuilder();
        
        for ( int i = 0; i &lt; original.length();) {
            char current = original.charAt(i);
            int count = 1;
            if ( i+1 &lt; original.length() &amp;&amp; original.charAt(i+1) == current) {
                while ( ++i &lt; original.length() &amp;&amp; original.charAt(i) == current) {
                    ++ count;
                }
                result.append(current);
                result.append(count);
            }else {
                result.append(current);
                result.append(count);
                ++i;
            }
        }
        return result.toString();
    }
    public static String stringCompressionBetter( String original ) {
        int size = 0;
        int count = 1;
        if ( original.length() == 0 )
            return original;
        char last = original.charAt(0);
        for ( int i = 1; i &lt; original.length(); i++) {
            if( original.charAt(i) == last) {
                count ++;
            }else {
                size += 1 + String.valueOf(count).length();
                last = original.charAt(i);
                count = 1;
            }
        }
        size += 1 + String.valueOf(count).length();
        if ( size &gt;= original.length())
            return original;
        
        last = original.charAt(0);
        count = 1;
        StringBuilder result = new StringBuilder();
        for ( int i = 1; i &lt; original.length(); i++) {
            if( original.charAt(i) == last) {
                count ++;
            }else {
                result.append(last);
                result.append(count);
                last = original.charAt(i);
                count = 1;
            }
        }
        result.append(last);
        result.append(count);
        return result.toString();
    }
    public static void main( String[] args ) {
        String str = "aabcccccaaa";
        System.out.println("original string: " + str + "\t" + "compressed string: " + stringCompression(str));
        System.out.println("original string: " + str + "\t" + "compressed string: " + stringCompressionBetter(str));
    }
}

</pre>


<h1 id="toc_4">Reference</h1>

<p>
<h6 class="timestamp"> Created Time: 2014/01/17 17:04:46.      Last Modified Time:  . </h6>
</p>


</div>
<div id="footer">
<p>
    <a href="index.html" id="back-home">&lsaquo; 首页</a>
    Copyleft © 2010, Driven by <a href="http://code.google.com/p/vimwiki/">Vimwiki</a>, Theme by Zhaosheng.    </p>
</div>
</div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="../../css/vimwiki.js" type="text/javascript"></script>
</body>
</html>
